<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>alt</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100dvh;
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: black;
    }

    body { position: fixed; inset: 0; }

    .ghost-cube {
      position: absolute;
      width: 56px;
      height: 56px;
      border-radius: 6px;
      background: #333;
      opacity: 0.28;
      cursor: pointer;
      will-change: transform;
      transition: opacity .3s, box-shadow .3s, background .3s;
    }

    .ghost-cube.playing {
      opacity: 0.9;
      z-index: 50;
    }

    .signature {
      position: fixed;
      bottom: 16px;
      right: 20px;
      color: white;
      opacity: .7;
      font-weight: 600;
      mix-blend-mode: difference;
      text-decoration: none;
    }

    #bgPlayer {
      position: absolute;
      width: 1px;
      height: 1px;
      visibility: hidden;
    }

    .music-control {
      position: fixed;
      bottom: 16px;
      left: 20px;
      display: none;
      background: rgba(0,0,0,.7);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 12px;
      mix-blend-mode: difference;
      cursor: pointer;
    }

    .music-control.active { display: block; }
  </style>
</head>

<body>

<a href="/" class="signature">priyesh</a>
<div id="musicControl" class="music-control" onclick="stopMusic()">‚è∏</div>
<div id="bgPlayer"></div>

<script>
  /* ---------- YouTube API ---------- */
  const tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  document.head.appendChild(tag);

  let player, currentCube = null;

  function onYouTubeIframeAPIReady() {
    player = new YT.Player('bgPlayer', {
      playerVars: { playsinline: 1, controls: 0, disablekb: 1, fs: 0, rel: 0 }
    });
  }

  function stopMusic() {
    if (!player) return;
    player.stopVideo();
    if (currentCube) {
      currentCube.classList.remove("playing");
      currentCube.style.background = "#333";
      currentCube.style.boxShadow = "";
      currentCube = null;
    }
    document.getElementById("musicControl").classList.remove("active");
  }

  /* ---------- Background ---------- */
  const bgColors = ["#ff005d","#00ffd5","#ffe600","#7b00ff","#00ff44","#ff7a00"];
  document.body.style.background =
    bgColors[Math.floor(Math.random()*bgColors.length)];

  /* ---------- FULL SONG POOL (unchanged) ---------- */
  const allSongs = [
    {id:"gt_Oe2yGE4o",start:25},{id:"Y1-Qymcppps",start:6},
    {id:"9OUurVdRGsc",start:56},{id:"6q6GtPdVHL4",start:28},
    {id:"gG_dA32oH44",start:36},{id:"MxEjnYdfLXU",start:0},
    {id:"2L1h4-EiTzM",start:36},{id:"o7fgFaXKVa0",start:0},
    {id:"rOHTCzwsg1s",start:66},{id:"H9NuWEeODew",start:50},
    {id:"ebSRSyycPf0",start:10},{id:"0_M2JX-Olv8",start:10},
    {id:"dcYJg5gGHC0",start:8},{id:"2L1h4-EiTzM",start:2},
    {id:"cj84OtodGmA",start:49},{id:"iX_TFkut1PM",start:145},
    {id:"rlb3IZ94CwE",start:43},{id:"jz-8_f6vG1M",start:7},
    {id:"qdroHHheK2c",start:47},{id:"HSkyD7lWxkY",start:162},
    {id:"VOukslHFYC0",start:13},{id:"SY1BL_JnzCo",start:0},
    {id:"pKHbgyNb9PM",start:88},{id:"ZK3tVnoYqHM",start:40},
    {id:"N-TKOh0zsvU",start:81},{id:"Y_V6y1ZCg_8",start:0},
    {id:"Y_V6y1ZCg_8",start:16},{id:"QAszapI0unE",start:0},
    {id:"wC4wbI5HLxs",start:4},{id:"10z6-vQm23w",start:17}
  ];

  /* ---------- Select 9 random songs ---------- */
  const songs = [...allSongs]
    .sort(()=>Math.random()-0.5)
    .slice(0,9);

  /* ---------- Add hidden guestroom cube ---------- */
  const cubesData = [...songs, "GUESTROOM"]
    .sort(()=>Math.random()-0.5);

  /* ---------- Cube Physics ---------- */
  class Cube {
    constructor(data) {
      this.data = data;
      this.size = 56;
      this.x = Math.random()*(innerWidth-this.size);
      this.y = Math.random()*(innerHeight-this.size);
      this.vx = (Math.random()*2+1)*(Math.random()<.5?-1:1);
      this.vy = (Math.random()*2+1)*(Math.random()<.5?-1:1);
      this.rot = Math.random()*360;

      this.el = document.createElement("div");
      this.el.className = "ghost-cube";
      document.body.appendChild(this.el);

      this.el.onclick = () => {
        if (this.data === "GUESTROOM") {
          location.href = "/guestroom";
          return;
        }
        playSong(this.data, this.el);
      };
    }

    update() {
      this.x += this.vx;
      this.y += this.vy;
      this.rot += 1;

      if (this.x<=0 || this.x>=innerWidth-this.size) this.vx*=-1;
      if (this.y<=0 || this.y>=innerHeight-this.size) this.vy*=-1;

      this.el.style.transform =
        `translate(${this.x}px,${this.y}px) rotate(${this.rot}deg)`;
    }
  }

  function playSong(song, el) {
    if (!player) return;

    if (currentCube) {
      currentCube.classList.remove("playing");
      currentCube.style.background = "#333";
      currentCube.style.boxShadow = "";
    }

    el.classList.add("playing");
    el.style.background = "#fff";
    el.style.boxShadow = "0 0 25px #fff";
    currentCube = el;

    player.loadVideoById({
      videoId: song.id,
      startSeconds: song.start
    });

    document.getElementById("musicControl").classList.add("active");
  }

  const cubes = cubesData.map(d => new Cube(d));

  function animate() {
    cubes.forEach(c => c.update());
    requestAnimationFrame(animate);
  }
  animate();
</script>

</body>
</html>