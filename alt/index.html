<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>alt</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100dvh; 
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: black; 
    }

    body {
      position: fixed; 
      inset: 0;
    }

    .cube, .ghost-cube {
      position: absolute;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      text-transform: lowercase;
      letter-spacing: 0.02em;
      user-select: none;
      text-decoration: none;
      will-change: transform;
      -webkit-tap-highlight-color: transparent; 
    }

    .cube {
      z-index: 5;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .ghost-cube {
      background: #333;
      color: transparent;
      opacity: 0.28;
      transition: opacity 0.3s, background 0.3s, box-shadow 0.3s;
      z-index: 1;
    }

    .ghost-cube.playing {
      opacity: 0.9;
      z-index: 50;
    }

    .signature {
      position: fixed;
      bottom: 16px;
      right: 20px;
      font-size: 16px;
      font-weight: 600;
      opacity: 0.7;
      z-index: 10;
      mix-blend-mode: difference;
      color: white;
      text-decoration: none;
    }

    #bgPlayer {
      position: absolute;
      visibility: hidden;
      width: 1px;
      height: 1px;
    }

    .music-control {
      position: fixed;
      bottom: 16px;
      left: 20px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 12px;
      z-index: 999;
      display: none;
      cursor: pointer;
      mix-blend-mode: difference;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .music-control.active { display: block; }
  </style>
</head>

<body>

<a href="" class="signature">priyesh</a>
<div class="music-control" id="musicControl" onclick="toggleMusic()">⏸</div>
<div id="bgPlayer"></div>

<script>
/* YOUTUBE */
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
document.head.appendChild(tag);

var player;
function onYouTubeIframeAPIReady() {
  player = new YT.Player('bgPlayer', {
    playerVars: { playsinline: 1, controls: 0, disablekb: 1, fs: 0, rel: 0 },
    events: { onStateChange: e => e.data === 0 && resetMusicUI() }
  });
}

/* BACKGROUND */
const bgColors = ["#ff005d","#00ffd5","#ffe600","#7b00ff","#00ff44","#ff7a00"];
document.body.style.background = bgColors[Math.floor(Math.random()*bgColors.length)];

/* LINKS */
const links = [
  { url:"https://priyeshranjan.com", label:"home" },
  { url:"https://priyeshowz.substack.com", label:"blog" },
  { url:"https://www.goodreads.com/priyeshowz", label:"reads" },
  { url:"https://letterboxd.com/priyeshowz", label:"boxd" },
  { url:"https://instagram.com/priyeshowz", label:"insta" },
  { url:"https://x.com/priyeshowz", label:"x" }
];

/* SONG POOL — UNTOUCHED (30) */
const allGhostLinks = [ /* exactly your list */ 
{videoId:"gt_Oe2yGE4o",start:25},{videoId:"Y1-Qymcppps",start:6},
{videoId:"9OUurVdRGsc",start:56},{videoId:"6q6GtPdVHL4",start:28},
{videoId:"gG_dA32oH44",start:36},{videoId:"MxEjnYdfLXU",start:0},
{videoId:"2L1h4-EiTzM",start:36},{videoId:"o7fgFaXKVa0",start:0},
{videoId:"rOHTCzwsg1s",start:66},{videoId:"H9NuWEeODew",start:50},
{videoId:"ebSRSyycPf0",start:10},{videoId:"0_M2JX-Olv8",start:10},
{videoId:"dcYJg5gGHC0",start:8},{videoId:"2L1h4-EiTzM",start:2},
{videoId:"cj84OtodGmA",start:49},{videoId:"iX_TFkut1PM",start:145},
{videoId:"rlb3IZ94CwE",start:43},{videoId:"jz-8_f6vG1M",start:7},
{videoId:"qdroHHheK2c",start:47},{videoId:"HSkyD7lWxkY",start:162},
{videoId:"VOukslHFYC0",start:13},{videoId:"SY1BL_JnzCo",start:0},
{videoId:"pKHbgyNb9PM",start:88},{videoId:"ZK3tVnoYqHM",start:40},
{videoId:"N-TKOh0zsvU",start:81},{videoId:"Y_V6y1ZCg_8",start:0},
{videoId:"Y_V6y1ZCg_8",start:16},{videoId:"QAszapI0unE",start:0},
{videoId:"wC4wbI5HLxs",start:4},{videoId:"10z6-vQm23w",start:17}
];

/* PICK 10, THEN PICK 1 OF THEM AS GUESTROOM */
const ghostLinks = [...allGhostLinks].sort(()=>Math.random()-0.5).slice(0,10);
const guestroomIndex = Math.floor(Math.random()*ghostLinks.length);

let currentPlayingCube=null, isPlaying=false;

function randomRange(a,b){return a+Math.random()*(b-a);}
function dims(){return window.visualViewport||window;}

class Cube{
  constructor(link,isGhost=false,ghostLink=null,isGuestroom=false){
    this.size=isGhost?56:80;
    this.x=randomRange(10,dims().width-this.size-10);
    this.y=randomRange(10,dims().height-this.size-10);
    this.vx=randomRange(-2,2); this.vy=randomRange(-2,2);
    this.rotation=Math.random()*360;
    this.rs=randomRange(-3,3);

    this.el=document.createElement(isGhost?"div":"a");
    this.el.className=isGhost?"ghost-cube":"cube";

    if(isGhost){
      this.el.onclick=()=> isGuestroom
        ? window.location.href="/guestroom"
        : playVideo(ghostLink.videoId,ghostLink.start,this.el);
    } else {
      this.el.href=link.url; this.el.target="_blank";
      this.el.textContent=link.label;
      const c=getVibrantColor();
      this.el.style.background=c.bg; this.el.style.color=c.text;
    }

    this.el.style.width=this.size+"px";
    this.el.style.height=this.size+"px";
    document.body.appendChild(this.el);
  }

  update(arr){
    this.x+=this.vx; this.y+=this.vy; this.rotation+=this.rs;
    const mx=dims().width-this.size, my=dims().height-this.size;
    if(this.x<=0||this.x>=mx) this.vx*=-1;
    if(this.y<=0||this.y>=my) this.vy*=-1;
    this.el.style.transform=`translate3d(${this.x}px,${this.y}px,0) rotate(${this.rotation}deg)`;
  }
}

/* COLOR */
function getVibrantColor(){
  const h=Math.random(),s=.6+Math.random()*.4,v=.7+Math.random()*.3;
  const i=Math.floor(h*6),f=h*6-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s);
  const map=[[v,t,p],[q,v,p],[p,v,t],[p,q,v],[t,p,v],[v,p,q]][i%6];
  const r=map[0]*255,g=map[1]*255,b=map[2]*255;
  return {bg:`rgb(${r|0},${g|0},${b|0})`,text:(r*299+g*587+b*114)/1000>=140?"#000":"#fff"};
}

/* MUSIC */
function playVideo(id,start,el){
  if(!player) return;
  if(currentPlayingCube){currentPlayingCube.classList.remove("playing");}
  el.classList.add("playing");
  currentPlayingCube=el;
  player.loadVideoById({videoId:id,startSeconds:start});
  isPlaying=true;
  musicControl.classList.add("active");
}
function resetMusicUI(){
  if(currentPlayingCube) currentPlayingCube.classList.remove("playing");
  isPlaying=false; musicControl.classList.remove("active");
}
function toggleMusic(){ if(isPlaying){player.stopVideo();resetMusicUI();} }

/* INIT */
const ghosts=[], cubes=[];
ghostLinks.forEach((g,i)=>ghosts.push(new Cube(null,true,g,i===guestroomIndex)));
links.forEach(l=>cubes.push(new Cube(l,false)));

(function animate(){
  ghosts.forEach(c=>c.update());
  cubes.forEach(c=>c.update(cubes));
  requestAnimationFrame(animate);
})();
</script>

</body>
</html>