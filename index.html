<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta name="google-site-verification" content="SI0zwFoQJERHchf2X1XOwkBtObZ20ApPKrUUkLhZLXI" />
  <title>Priyesh Ranjan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      max-width: 620px;
      margin: 80px auto;
      padding: 0 16px;
      line-height: 1.6;
      color: #111;
    }
    a {
      color: #0066cc;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .footer {
      margin-top: 4rem;
      font-size: 0.85rem;
      color: #666;
      display: flex;
      justify-content: space-between;
      align-items: center;
  }

    .footer a {
      color: #666;
      text-decoration: none;
  }

    .footer a:hover {
      color: #111;
      text-decoration: underline;
  }
    .copyright {
      margin-top: 0.4rem;
      font-size: 0.75rem;
      color: #888;
  }

    .alt-link {
      background: #ff0000;
      color: white;
      padding: 4px 10px;
      border-radius: 3px;
      font-size: 0.75rem;
      font-weight: 600;
      animation: blink 1s infinite;
      text-decoration: none !important;
    }

    .alt-link:hover {
      text-decoration: none !important;
      animation: none;
      background: #cc0000;
    }

    @keyframes blink {
      0%, 49% {
        background: #ff0000;
      }
      50%, 100% {
        background: #00ff00;
      }
    }

p a {
  color: inherit;
  text-decoration: underline;
  text-decoration-color: #bbb;
}

p a:hover {
  text-decoration-color: #111;
}

  </style>
</head>
<body>

  <img src="me.jpg" alt="Priyesh Ranjan"
       style="width:120px; border-radius:6px; margin-bottom:1.25rem;">

  <h1>Priyesh Ranjan</h1>

  <p>
    final-year mbbs at nmch, patna.
  </p>

  <p>
  likes <a href="https://www.goodreads.com/priyeshowz">reading</a> and <a href="https://priyeshowz.substack.com/">writing</a> weird stuff, occasionally reads and writes non-weird stuff as well. newfound interest in japanese <a href="https://letterboxd.com/priyeshowz/">movies</a>.
  </p>

  <hr>

  <h2>crashcan</h2>
  <ul>
    <li>
      <a href="https://priyeshowz.substack.com/p/a-scavenger">a scavenger</a>
      <span style="color:#555;"> — 2024</span>
    </li>
    <li>
      <a href="https://priyeshowz.substack.com/p/nature-of-personality">nature of personality</a>
      <span style="color:#555;"> — 2023</span>
    </li>
  </ul>

  <hr>

<div class="footer">
  <div>
    <a href="https://x.com/priyeshowz">x</a> ·
    <a href="https://instagram.com/priyeshowz">instagram</a>
  </div>
  <a href="/alt" class="alt-link">alt</a>
</div>

<p class="copyright">
  © Priyesh Ranjan · 2026
</p>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
/**
 * PRESENCE SYSTEM: MAIN PAGE
 */
const PAGE_CONFIG = {
    // 1. CONFIGURATION
    pageId: 'main',        // Matches DB row 'main'
    pixelColor: '#888888', // Neutral Gray
    
    // 2. GRID SETTINGS
    gridDimension: 120,    // 120x120 grid
    safeMarginRatio: 0.05, // 5% margin from edge
    renderGap: 0,          // 0 = solid block

    // 3. API KEYS (Paste yours here)
    supabaseUrl: 'https://vxejmnxqwnmxcmsvxkjl.supabase.co',
    supabaseKey: 'sb_publishable_3rpDu6-tw90RYNpgVqq_mA_DmxbBNYX'
};

(function() {
    // --- SETUP CANVAS ---
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.style.cssText = 'position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:-1; pointer-events:none;';
    document.body.appendChild(canvas);

    // --- STATE ---
    let filledCount = 0;

    // --- ALGORITHM: SHELL FILL (Top-Left Anchor) ---
    function getPixelCoord(n) {
        const k = Math.floor(Math.sqrt(n));
        const remainder = n - (k * k);
        let x, y;
        
        if (remainder <= k) {
            x = k; y = remainder; 
        } else {
            x = (2 * k) - remainder; y = k;
        }
        return {x, y};
    }

    // --- RENDER ---
    function draw() {
        const w = window.innerWidth;
        const h = window.innerHeight;
        canvas.width = w; canvas.height = h;
        
        const minDim = Math.min(w, h);
        const margin = Math.floor(minDim * PAGE_CONFIG.safeMarginRatio);
        const pixelSize = Math.max(1, Math.floor((minDim - (margin * 2)) / PAGE_CONFIG.gridDimension));

        ctx.clearRect(0, 0, w, h);
        ctx.fillStyle = PAGE_CONFIG.pixelColor;

        for (let i = 0; i < filledCount; i++) {
            const coord = getPixelCoord(i);
            if (coord.x >= PAGE_CONFIG.gridDimension || coord.y >= PAGE_CONFIG.gridDimension) break;
            
            ctx.fillRect(
                margin + (coord.x * pixelSize), 
                margin + (coord.y * pixelSize), 
                pixelSize - PAGE_CONFIG.renderGap, 
                pixelSize - PAGE_CONFIG.renderGap
            );
        }
    }

    // --- SYNC ---
    async function init() {
        const supabase = window.supabase.createClient(PAGE_CONFIG.supabaseUrl, PAGE_CONFIG.supabaseKey);

        // Atomic Increment
        const { data, error } = await supabase.rpc('increment_pixel', { target_page: PAGE_CONFIG.pageId });

        if (!error && data !== null) {
            filledCount = data;
        } else {
            // Fallback Read
            const { data: readData } = await supabase
                .from('presence_pixels')
                .select('filled_count')
                .eq('page_id', PAGE_CONFIG.pageId)
                .single();
            if (readData) filledCount = readData.filled_count;
        }
        draw();
        window.addEventListener('resize', draw);
    }

    init();
})();
</script>


</body>
</html>